<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=10, user-scalable=no">
    <title>Terminais do Sistema Transcol</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" 
    integrity="sha512-xodZBNTC5n17Xt2atTPuE1HxjVMSvLVW9ocqUKLsCC5CXdbqCmblAshOMAS6/keqq/sMZMZ19scR4PsZChSR7A==" crossorigin="" />
    <script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js" 
    integrity="sha512-XQoYMqMTK8LvdxXYG3nZ448hOEQiglfqkJs1NOQV44cWnUrBc8PkAOcXy20w0vlaXaVUearIOBhiXZ5V3ynxwA==" crossorigin=""></script>
</head>
<body>
    <div id="mapa"></div>
      
    <!--- Leaflet -->

    <script>
        const lat = -20.271926, lng = -40.325852
        const zoom = 11.5

        var map = L.map("mapa", {
            zoomSnap: 0.25 // definição de zoom
        }).setView([lat, lng],zoom)
        
        // bases cartográficas
        var CartoDB_Voyager = L.tileLayer('https://{s}.basemaps.cartocdn.com/rastertiles/voyager/{z}/{x}/{y}{r}.png', {
	    attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors &copy; <a href="https://carto.com/attributions">CARTO</a>',
	    subdomains: 'abcd',
	    minZoom: zoom,
        }).addTo(map)

        var Esri_WorldImagery = L.tileLayer('https://server.arcgisonline.com/ArcGIS/rest/services/World_Imagery/MapServer/tile/{z}/{y}/{x}', {
    	attribution: 'Tiles &copy; Esri &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community'
        })

        // camada das bases
        var baseLayers = {
            "Vetorial": CartoDB_Voyager,
            "Satélite": Esri_WorldImagery
        }

        // controle de camadas
        let controle = L.control.layers(baseLayers).addTo(map)

        // icones terminais
        let itjc = L.divIcon({html:'<p id="paragrafo">TJC</p>',className:'icone'})
        let itla = L.divIcon({html:'<p id="paragrafo">TLA</p>',className:'icone'})
        let itca = L.divIcon({html:'<p id="paragrafo">TCA</p>',className:'icone'})
        let itst = L.divIcon({html:'<p id="paragrafo">TST</p>',className:'icone'})
        let itja = L.divIcon({html:'<p id="paragrafo">TJA</p>',className:'icone'})
        let itic = L.divIcon({html:'<p id="paragrafo">TIC</p>',className:'icone'})
        let itcg = L.divIcon({html:'<p id="paragrafo">TCG</p>',className:'icone'})
        let itib = L.divIcon({html:'<p id="paragrafo">TIB</p>',className:'icone'})
        let itvl = L.divIcon({html:'<p id="paragrafo">TVL</p>',className:'icone'})
        let itip = L.divIcon({html:'<p id="paragrafo">TIP</p>',className:'icone'})

        // localização terminais
        let tjc = L.marker([-20.159310,-40.195692], {icon:itjc}).on('click', zoomMarker).bindTooltip('Terminal Jacaraípe',getToolip()).addTo(map)
        let tla = L.marker([-20.193743,-40.255401], {icon:itla}).on('click', zoomMarker).bindTooltip('Terminal Laranjeiras',getToolip()).addTo(map)
        let tca = L.marker([-20.230704,-40.270053], {icon:itca}).on('click', zoomMarker).bindTooltip('Terminal Carapina',getToolip()).addTo(map)
        let tst = L.marker([-20.330000,-40.3531859], {icon:itst}).on('click', zoomMarker).bindTooltip('Terminal São Torquato',getToolip()).addTo(map)
        let tja = L.marker([-20.333730,-40.359087], {icon:itja}).on('click', zoomMarker).bindTooltip('Terminal Jardim América',getToolip()).addTo(map)
        let tic = L.marker([-20.325550,-40.372151], {icon:itic}).on('click', zoomMarker).bindTooltip('Terminal Itacibá',getToolip()).addTo(map)
        let tcg = L.marker([-20.346329,-40.396696], {icon:itcg}).on('click', zoomMarker).bindTooltip('Terminal Campo Grande',getToolip()).addTo(map)
        let tib = L.marker([-20.346300,-40.315460], {icon:itib}).on('click', zoomMarker).bindTooltip('Terminal Ibes',getToolip()).addTo(map)
        let tvl = L.marker([-20.342650,-40.294687], {icon:itvl}).on('click', zoomMarker).bindTooltip('Terminal Vila Velha',getToolip()).addTo(map)
        let tip = L.marker([-20.391223,-40.321080], {icon:itip}).on('click', zoomMarker).bindTooltip('Terminal Itaparica',getToolip()).addTo(map)

        // inserir zoom quando clicar no marcador
        function zoomMarker(e){
            var latLng = [e.target.getLatLng()]
            var markerBounds = L.latLngBounds(latLng)
            map.fitBounds(markerBounds)
        }
        
        // configurar Toolip
        function getToolip() {
            return {
                permanent: false,
                offset: [20,3],
                sticky: true, 
            }
        }

        // inserir logo da Ceturb
        var titulo = L.control({position:"bottomright"})
        titulo.onAdd = function(map) {
            var img = L.DomUtil.create('img','logo')
            img.src = 'imagens/logoceturb.svg'
            img.style.opacity = 0.6
            img.style.width = "110px"
            return img;
        }
        titulo.addTo(map)

        // inserir imagem overlay
        var urltip = 'https://github.com/rafaeldgeo/mapzone/blob/main/terminais_transcol/imagens/tip.png?raw=true'
        var tipbounds = [[-20.390057,-40.320336],[-20.392285,-40.321696]]
        L.imageOverlay(urltip,tipbounds, {opacity:0.6}).addTo(map)

        var urltib = 'https://github.com/rafaeldgeo/mapzone/blob/main/terminais_transcol/imagens/tib.png?raw=true'
        var tibbounds = [[-20.345964,-40.314944],[-20.346794,-40.315917]]
        L.imageOverlay(urltib,tibbounds, {opacity:0.6}).addTo(map)

        var urltvl = 'https://github.com/rafaeldgeo/mapzone/blob/main/terminais_transcol/imagens/tvl.png?raw=true'
        var tvlbounds = [[-20.342251,-40.294201],[-20.343433,-40.295273]]
        L.imageOverlay(urltvl,tvlbounds, {opacity:0.6}).addTo(map)
        
        var urltst = 'https://github.com/rafaeldgeo/mapzone/blob/main/terminais_transcol/imagens/tst.png?raw=true'
        var tstbounds = [[-20.329696,-40.352527],[-20.330550,-40.353516]]
        L.imageOverlay(urltst,tstbounds, {opacity:0.6}).addTo(map)

        var urltja = 'https://github.com/rafaeldgeo/mapzone/blob/main/terminais_transcol/imagens/tja.png?raw=true'
        var tjabounds = [[-20.333121,-40.358479],[-20.334326,-40.359688]]
        L.imageOverlay(urltja,tjabounds, {opacity:0.6}).addTo(map)
        
        var urltic = 'https://github.com/rafaeldgeo/mapzone/blob/main/terminais_transcol/imagens/tic.png?raw=true'
        var ticbounds = [[-20.324839,-40.372034],[-20.326883,-40.373184]]
        L.imageOverlay(urltic,ticbounds, {opacity:0.6}).addTo(map)

        var urltcg = 'https://github.com/rafaeldgeo/mapzone/blob/main/terminais_transcol/imagens/tic.png?raw=true'
        var tcgbounds = [[-20.345350,-40.395424],[-20.346779,-40.397783]]
        L.imageOverlay(urltcg,tcgbounds, {opacity:0.6}).addTo(map)
        
    </script>
    
</body>
</html>